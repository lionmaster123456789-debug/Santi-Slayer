<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Santi Slayer - 2026 Master Edition</title>
    <style>
        body { margin: 0; background: #1a1a1a; color: white; font-family: 'Segoe UI', Tahoma, sans-serif; overflow: hidden; }
        canvas { background: #1b5e20; display: block; }
        #ui { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.8); padding: 15px; border-radius: 10px; border: 2px solid #555; pointer-events: none; min-width: 250px; }
        #xp-bar-container { width: 100%; height: 10px; background: #333; border-radius: 5px; margin-bottom: 10px; }
        #xp-bar { height: 100%; background: #3498db; width: 0%; border-radius: 5px; transition: 0.3s; }
        #slots { display: flex; gap: 5px; flex-wrap: wrap; margin-top: 10px; }
        .slot { width: 32px; height: 32px; border: 1px solid #f1c40f; background: #222; display: flex; align-items: center; justify-content: center; font-size: 16px; position: relative; }
        .slot small { position: absolute; bottom: -2px; right: 1px; font-size: 8px; color: #0f0; }
        .btn-back { position: absolute; top: 10px; right: 10px; padding: 10px 20px; background: #c0392b; color: white; text-decoration: none; border-radius: 5px; font-weight: bold; z-index: 1000; border: 2px solid white; }
        #upgrade-menu { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #2c3e50; padding: 30px; border: 5px solid #f1c40f; display: none; text-align: center; border-radius: 20px; z-index: 2000; width: 550px; }
        .upgrade-container { display: flex; justify-content: center; gap: 15px; }
        .upgrade-card { background: #34495e; padding: 15px; cursor: pointer; border-radius: 10px; width: 150px; transition: 0.2s; border: 2px solid transparent; }
        .upgrade-card:hover { background: #1abc9c; border-color: white; }
    </style>
</head>
<body>

    <div id="ui">
        <div id="xp-bar-container"><div id="xp-bar"></div></div>
        <div style="font-size: 18px;">LV <span id="lvl">1</span> | Zeit: <span id="timer">0</span>s</div>
        <div style="color: #e74c3c;">HP: <span id="hpTxt">100</span></div>
        <div id="slots"></div>
    </div>

    <a href="https://rhinogamescom.wordpress.com" class="btn-back">GET BACK</a>

    <div id="upgrade-menu">
        <h2 style="color: #f1c40f;">LEVEL UP!</h2>
        <div id="upgrade-options" class="upgrade-container"></div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const WORLD_SIZE = 4000;
        let canvasW, canvasH;
        function resize() { canvasW = canvas.width = window.innerWidth; canvasH = canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        let player = { x: WORLD_SIZE/2, y: WORLD_SIZE/2, speed: 4.5, hp: 100, maxHp: 100, xp: 0, nextXp: 100, lvl: 1, slots: [] };
        let camera = { x: 0, y: 0 }, keys = {}, enemies = [], projectiles = [], gems = [], env = [], effects = [];
        let gameActive = true, lastShot = 0, lastLightning = 0, mySkills = {};

        // Die 20 Upgrades
        const ALL_SKILLS = [
            {id:'fire', name:'Tempo', icon:'üèπ'}, {id:'bolt', name:'Blitz', icon:'‚ö°'}, {id:'bunny', name:'Hase', icon:'üêá'},
            {id:'spd', name:'Schuhe', icon:'üëü'}, {id:'reg', name:'Heilung', icon:'üçé'}, {id:'arm', name:'Schild', icon:'üõ°Ô∏è'},
            {id:'aoe', name:'Bombe', icon:'üí£'}, {id:'mag', name:'Magnet', icon:'üß≤'}, {id:'vamp', name:'Vampir', icon:'üßõ'},
            {id:'ice', name:'Frost', icon:'‚ùÑÔ∏è'}, {id:'poi', name:'Gift', icon:'üß™'}, {id:'crit', name:'Krit', icon:'üéØ'},
            {id:'ring', name:'Aura', icon:'üî•'}, {id:'gold', name:'Gier', icon:'üí∞'}, {id:'size', name:'Riese', icon:'üêò'},
            {id:'mult', name:'Multi', icon:'‚ú®'}, {id:'dash', name:'Sprint', icon:'üåÄ'}, {id:'shrd', name:'Splitter', icon:'üíé'},
            {id:'wall', name:'Mauer', icon:'üß±'}, {id:'luck', name:'Gl√ºck', icon:'üçÄ'}
        ];

        // Die 15 Gegnertypen
        const ENEMY_TYPES = [
            {n:'Wurm', col:'#2ecc71', sz:10, hp:3, spd:2}, {n:'Schlange', col:'#27ae60', sz:12, hp:6, spd:2.2},
            {n:'Wolf', col:'#95a5a6', sz:18, hp:12, spd:3.5}, {n:'Wespe', col:'#f1c40f', sz:8, hp:5, spd:5},
            {n:'B√§r', col:'#5d4037', sz:35, hp:40, spd:1.5}, {n:'Skorpion', col:'#d35400', sz:20, hp:25, spd:2.8},
            {n:'Eber', col:'#795548', sz:25, hp:35, spd:4}, {n:'Golem', col:'#34495e', sz:45, hp:150, spd:0.8},
            {n:'Geist', col:'rgba(255,255,255,0.5)', sz:20, hp:20, spd:3}, {n:'Oger', col:'#1b5e20', sz:40, hp:80, spd:2},
            {n:'D√§mon', col:'#c0392b', sz:30, hp:100, spd:3.2}, {n:'Spinne', col:'#000', sz:15, hp:25, spd:4.5},
            {n:'Tentakel', col:'#8e44ad', sz:25, hp:60, spd:2.5}, {n:'Echse', col:'#16a085', sz:22, hp:50, spd:3.8},
            {n:'Boss-Auge', col:'#fff', sz:60, hp:500, spd:1}
        ];

        for(let i=0; i<80; i++) env.push({x:Math.random()*WORLD_SIZE, y:Math.random()*WORLD_SIZE, t:Math.random()>0.5?'tree':'stone', sz:25+Math.random()*20});

        window.addEventListener('keydown', e => keys[e.key.toLowerCase()] = true);
        window.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);

        function spawn() {
            if(!gameActive) return;
            let time = (Date.now() - player.startTime)/1000;
            let idx = Math.min(14, Math.floor(time / 15)); 
            let a = Math.random()*Math.PI*2;
            let x = player.x + Math.cos(a)*800, y = player.y + Math.sin(a)*800;
            let t = ENEMY_TYPES[idx];
            enemies.push({...t, x, y, curHp: t.hp});
        }
        setInterval(spawn, 800);

        function levelUp() {
            gameActive = false;
            const menu = document.getElementById('upgrade-menu');
            const cont = document.getElementById('upgrade-options');
            cont.innerHTML = '';
            let pool = ALL_SKILLS.sort(() => 0.5-Math.random()).slice(0, 3);
            pool.forEach(s => {
                let card = document.createElement('div');
                card.className = 'upgrade-card';
                card.innerHTML = `<div style="font-size:30px">${s.icon}</div><b>${s.name}</b><br>LV ${ (mySkills[s.id]||0)+1 }`;
                card.onclick = () => {
                    if(!mySkills[s.id]) player.slots.push(s);
                    mySkills[s.id] = (mySkills[s.id]||0)+1;
                    if(s.id==='reg') player.hp = Math.min(player.maxHp, player.hp+20);
                    updateUI(); gameActive = true; menu.style.display = 'none'; window.focus();
                };
                cont.appendChild(card);
            });
            menu.style.display = 'block';
        }

        function updateUI() {
            document.getElementById('slots').innerHTML = player.slots.map(s => `<div class="slot">${s.icon}<small>${mySkills[s.id]}</small></div>`).join('');
            document.getElementById('lvl').innerText = player.lvl;
            document.getElementById('xp-bar').style.width = (player.xp/player.nextXp*100)+'%';
            document.getElementById('hpTxt').innerText = Math.floor(player.hp);
        }

        function update() {
            if(!gameActive) return;
            let time = Math.floor((Date.now() - player.startTime)/1000);
            document.getElementById('timer').innerText = time;

            let spd = player.speed + (mySkills.spd||0)*0.5;
            if(keys['w'] && player.y > 0) player.y -= spd;
            if(keys['s'] && player.y < WORLD_SIZE) player.y += spd;
            if(keys['a'] && player.x > 0) player.x -= spd;
            if(keys['d'] && player.x < WORLD_SIZE) player.x += spd;

            camera.x = player.x - canvasW/2; camera.y = player.y - canvasH/2;

            // Blitz Skill (‚ö°)
            if(mySkills.bolt && Date.now()-lastLightning > 4000/mySkills.bolt) {
                let t = enemies.find(e => Math.hypot(e.x-player.x, e.y-player.y) < 500);
                if(t) { t.curHp -= 10; effects.push({x1:player.x, y1:player.y, x2:t.x, y2:t.y, l:10}); lastLightning = Date.now(); }
            }

            // Sichtfeld Auto-Schuss (üèπ)
            if(Date.now()-lastShot > 600/(mySkills.fire||1)) {
                let target = enemies.find(e => Math.hypot(e.x-player.x, e.y-player.y) < 500);
                if(target) {
                    let a = Math.atan2(target.y-player.y, target.x-player.x);
                    projectiles.push({x:player.x, y:player.y, vx:Math.cos(a)*12, vy:Math.sin(a)*12});
                    lastShot = Date.now();
                }
            }

            enemies.forEach((en, i) => {
                let dist = Math.hypot(player.x-en.x, player.y-en.y);
                let a = Math.atan2(player.y-en.y, player.x-en.x);
                en.x += Math.cos(a)*en.spd; en.y += Math.sin(a)*en.spd;

                if(dist < en.sz+20) { player.hp -= (0.3/(mySkills.arm||1)); updateUI(); }
                projectiles.forEach((p, pi) => {
                    if(Math.hypot(p.x-en.x, p.y-en.y) < en.sz+10) { en.curHp -= 5; projectiles.splice(pi,1); }
                });

                if(en.curHp <= 0) {
                    gems.push({x:en.x, y:en.y}); enemies.splice(i,1);
                }
            });

            gems.forEach((g, i) => {
                let d = Math.hypot(player.x-g.x, player.y-g.y);
                let range = 100 + (mySkills.mag||0)*50;
                if(d < range) {
                    g.x += (player.x-g.x)*0.2; g.y += (player.y-g.y)*0.2;
                    if(d < 20) {
                        gems.splice(i,1); player.xp += 25 * (mySkills.gold||1);
                        if(player.xp >= player.nextXp) { player.lvl++; player.xp=0; player.nextXp*=1.2; levelUp(); }
                        updateUI();
                    }
                }
            });

            if(player.hp <= 0) location.reload();
            draw(); requestAnimationFrame(update);
        }

        function draw() {
            ctx.clearRect(0,0,canvasW,canvasH); ctx.save(); ctx.translate(-camera.x, -camera.y);
            // Border
            ctx.strokeStyle="red"; ctx.lineWidth=10; ctx.strokeRect(0,0,WORLD_SIZE,WORLD_SIZE);
            // Env
            env.forEach(o => { ctx.fillStyle=o.t==='tree'?'#145a32':'#7f8c8d'; ctx.beginPath(); ctx.arc(o.x,o.y,o.sz,0,Math.PI*2); ctx.fill(); });
            // Gems
            ctx.fillStyle="#3498db"; gems.forEach(g => { ctx.beginPath(); ctx.arc(g.x,g.y,6,0,6.28); ctx.fill(); });
            // Player
            ctx.fillStyle="#2980b9"; ctx.beginPath(); ctx.arc(player.x,player.y,25,0,6.28); ctx.fill();
            // Enemies
            enemies.forEach(en => { 
                ctx.fillStyle=en.col; ctx.beginPath(); ctx.arc(en.x,en.y,en.sz,0,6.28); ctx.fill();
                ctx.fillStyle="red"; ctx.fillRect(en.x-15, en.y-en.sz-10, 30*(en.curHp/en.hp), 4);
            });
            // Lightning
            effects.forEach((ef,i) => { ctx.strokeStyle="cyan"; ctx.lineWidth=3; ctx.beginPath(); ctx.moveTo(ef.x1,ef.y1); ctx.lineTo(ef.x2,ef.y2); ctx.stroke(); ef.l--; if(ef.l<0) effects.splice(i,1); });
            // Shots
            ctx.fillStyle="yellow"; projectiles.forEach(p => { p.x+=p.vx; p.y+=p.vy; ctx.beginPath(); ctx.arc(p.x,p.y,5,0,6.28); ctx.fill(); });
            ctx.restore();
        }
        player.startTime = Date.now(); updateUI(); update();
    </script>
</body>
</html>
